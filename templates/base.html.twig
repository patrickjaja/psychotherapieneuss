<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{% block meta_description %}Psychotherapie in Neuss - Professionelle Hilfe bei psychischen Erkrankungen. Dr. rer. nat. Pia Dornberger, Psychologische Psychotherapeutin mit Fachkunde Verhaltenstherapie.{% endblock %}">
    <title>{% block title %}Psychotherapie Neuss - Dr. Pia Dornberger{% endblock %}</title>

    <!-- Canonical URL -->
    <link rel="canonical" href="{% block canonical_url %}https://www.psychotherapieneuss.de/{% endblock %}">

    <!-- Open Graph Tags -->
    <meta property="og:site_name" content="Psychotherapie Neuss">
    <meta property="og:type" content="website">
    <meta property="og:title" content="{% block og_title %}{{ block('title') }}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{{ block('meta_description') }}{% endblock %}">
    <meta property="og:url" content="{{ block('canonical_url') }}">
    <meta property="og:image" content="{% block og_image %}https://www.psychotherapieneuss.de/images/praxis-hero.jpg{% endblock %}">
    <meta property="og:locale" content="de_DE">

    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block twitter_title %}{{ block('title') }}{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}{{ block('meta_description') }}{% endblock %}">
    <meta name="twitter:image" content="{% block twitter_image %}{{ block('og_image') }}{% endblock %}">

    <!-- Structured Data: Psychologist Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Psychologist",
      "@id": "https://www.psychotherapieneuss.de/#organization",
      "name": "Praxis für Psychotherapie Dr. rer. nat. Pia Dornberger",
      "image": "https://www.psychotherapieneuss.de/images/praxis-hero.jpg",
      "url": "https://www.psychotherapieneuss.de",
      "telephone": "+49-2131-5395431",
      "email": "info@psychotherapieneuss.de",
      "medicalSpecialty": "Verhaltenstherapie",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Friedrichstr. 10",
        "addressLocality": "Neuss",
        "postalCode": "41460",
        "addressCountry": "DE"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 51.1985,
        "longitude": 6.6852
      },
      "areaServed": ["Neuss", "Düsseldorf", "Krefeld", "Mönchengladbach"],
      "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
        "opens": "09:00",
        "closes": "18:00"
      },
      "paymentAccepted": ["Gesetzliche Krankenversicherung", "Private Krankenversicherung"],
      "currenciesAccepted": "EUR"
    }
    </script>

    <!-- Preconnect for Google Forms (Diagnostik section) -->
    <link rel="preconnect" href="https://docs.google.com">

    <!-- Local Tailwind CSS - GDPR Compliant (no external CDN) -->
    <link href="/css/app.css" rel="stylesheet">

    {% block stylesheets %}{% endblock %}
</head>
<body class="bg-neutral-light text-neutral">
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4 py-4">
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
                <div class="flex items-center justify-between">
                    <a href="/" class="text-2xl font-semibold text-primary">
                        Psychotherapie Neuss
                    </a>
                    <button class="lg:hidden" id="mobile-menu-button">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
                
                <ul class="hidden lg:flex lg:space-x-8 mt-4 lg:mt-0" id="nav-menu">
                    <li><a href="/" class="block py-2 lg:py-0 hover:text-primary transition-colors {% if current_page == 'home' %}text-primary font-medium{% endif %}">Startseite</a></li>
                    <li><a href="/psychotherapie" class="block py-2 lg:py-0 hover:text-primary transition-colors {% if current_page == 'psychotherapy' %}text-primary font-medium{% endif %}">Psychotherapie</a></li>
                    <li class="relative group">
                        <button type="button" id="services-dropdown-toggle"
                                class="flex items-center py-2 lg:py-0 hover:text-primary transition-colors {% if current_page == 'services' %}text-primary font-medium{% endif %}"
                                aria-expanded="false" aria-haspopup="true">
                            Leistungen
                            <svg id="services-dropdown-arrow" class="w-4 h-4 ml-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <ul id="services-dropdown-menu" class="lg:absolute lg:left-0 lg:mt-2 lg:w-64 lg:bg-white lg:shadow-lg lg:rounded-lg py-2 hidden lg:group-hover:block transition-all duration-200 z-50 pl-4 lg:pl-0">
                            <li><a href="/leistungen/kognitive-verhaltenstherapie" class="block px-4 py-2 hover:bg-primary/10 hover:text-primary transition-colors">Kognitive Verhaltenstherapie</a></li>
                            <li><a href="/leistungen/coaching" class="block px-4 py-2 hover:bg-primary/10 hover:text-primary transition-colors">Coaching und Beratung</a></li>
                            <li><a href="/leistungen/online-therapie" class="block px-4 py-2 hover:bg-primary/10 hover:text-primary transition-colors">Online-Therapie</a></li>
                            <li class="lg:hidden border-t border-neutral/20 mt-2 pt-2">
                                <a href="/leistungen" class="block px-4 py-2 hover:bg-primary/10 hover:text-primary transition-colors">Alle Leistungen →</a>
                            </li>
                        </ul>
                    </li>
                    <li><a href="/leistungen/diagnostik" class="block py-2 lg:py-0 hover:text-primary transition-colors {% if current_page == 'diagnostik' %}text-primary font-medium{% endif %}">Diagnostik</a></li>
                    <li><a href="/kostenuebernahme" class="block py-2 lg:py-0 hover:text-primary transition-colors {% if current_page == 'costs' %}text-primary font-medium{% endif %}">Kostenübernahme</a></li>
                    <li><a href="/zur-person" class="block py-2 lg:py-0 hover:text-primary transition-colors {% if current_page == 'about' %}text-primary font-medium{% endif %}">Zur Person</a></li>
                    <li><a href="/praxis" class="block py-2 lg:py-0 hover:text-primary transition-colors {% if current_page == 'practice' %}text-primary font-medium{% endif %}">Praxis</a></li>
                    <li><a href="/kontakt" class="block py-2 lg:py-0 hover:text-primary transition-colors {% if current_page == 'contact' %}text-primary font-medium{% endif %}">Kontakt</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="min-h-screen">
        {% block content %}{% endblock %}
    </main>

    <footer class="bg-footer-dark text-white py-8 mt-16">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="font-semibold mb-3">Kontakt</h3>
                    <p>Dr. Pia Dornberger</p>
                    <p>Friedrichstr. 10</p>
                    <p>41460 Neuss</p>
                    <p class="mt-2">
                        <a href="mailto:info@psychotherapieneuss.de" class="hover:text-primary transition-colors">info@psychotherapieneuss.de</a>
                    </p>
                    <p>Tel: 02131 539 54 31</p>
                </div>
                
                <div>
                    <h3 class="font-semibold mb-3">Schnellzugriff</h3>
                    <ul class="space-y-2">
                        <li><a href="/psychotherapie" class="hover:text-primary transition-colors">Psychotherapie</a></li>
                        <li><a href="/leistungen" class="hover:text-primary transition-colors">Leistungen</a></li>
                        <li><a href="/kontakt" class="hover:text-primary transition-colors">Kontakt</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="font-semibold mb-3">Rechtliches</h3>
                    <ul class="space-y-2">
                        <li><a href="/impressum" class="hover:text-primary transition-colors">Impressum</a></li>
                        <li><a href="/datenschutz" class="hover:text-primary transition-colors">Datenschutz</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="mt-8 pt-8 border-t border-neutral/50 text-center text-sm">
                <p>&copy; <?= date('Y') ?> Psychotherapie Neuss. Alle Rechte vorbehalten.</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        document.getElementById('mobile-menu-button').addEventListener('click', function() {
            const menu = document.getElementById('nav-menu');
            menu.classList.toggle('hidden');
        });

        // Services dropdown toggle (for mobile and click support)
        const dropdownToggle = document.getElementById('services-dropdown-toggle');
        const dropdownMenu = document.getElementById('services-dropdown-menu');
        const dropdownArrow = document.getElementById('services-dropdown-arrow');

        if (dropdownToggle && dropdownMenu) {
            dropdownToggle.addEventListener('click', function(e) {
                e.stopPropagation();
                const isOpen = !dropdownMenu.classList.contains('hidden');
                dropdownMenu.classList.toggle('hidden');
                dropdownArrow.classList.toggle('rotate-180');
                dropdownToggle.setAttribute('aria-expanded', !isOpen);
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!dropdownToggle.contains(e.target) && !dropdownMenu.contains(e.target)) {
                    dropdownMenu.classList.add('hidden');
                    dropdownArrow.classList.remove('rotate-180');
                    dropdownToggle.setAttribute('aria-expanded', 'false');
                }
            });
        }
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>